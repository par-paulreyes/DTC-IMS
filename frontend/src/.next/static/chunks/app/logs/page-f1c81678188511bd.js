(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{5611:(e,t,a)=>{"use strict";a.d(t,{VG:()=>r,e9:()=>n});let s=a(4089).env.NEXT_PUBLIC_API_URL||"http://192.168.100.188:5000",n=e=>"".concat(s,"/api").concat(e),r=e=>e?e.startsWith("http")?e:"".concat(s).concat(e):""},7642:(e,t,a)=>{Promise.resolve().then(a.bind(a,9385))},9385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(3365),n=a(1521),r=a(627),l=a(8660),c=a(5611);function i(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)(""),x=(0,r.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return void x.push("/login");l.A.get((0,c.e9)("/logs"),{headers:{Authorization:e}}).then(e=>t(e.data)).catch(e=>d("Error loading logs")).finally(()=>i(!1))},[x]);let h=e=>{let t=localStorage.getItem("token");window.open("".concat((0,c.e9)("/logs/export"),"?format=").concat(e,"&token=").concat(t),"_blank")};return(0,s.jsxs)("div",{className:"min-h-screen pt-8 pb-20 bg-gray-50",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Maintenance Logs"}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>h("csv"),children:"Export CSV"}),(0,s.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",onClick:()=>h("pdf"),children:"Export PDF"})]}),a&&(0,s.jsx)("div",{className:"text-center text-blue-600",children:"Loading..."}),o&&(0,s.jsx)("div",{className:"text-center text-red-500",children:o}),!a&&!o&&(0,s.jsxs)("ul",{className:"max-w-2xl mx-auto divide-y divide-gray-200 bg-white rounded shadow",children:[0===e.length&&(0,s.jsx)("li",{className:"p-6 text-center text-gray-500",children:"No logs found."}),e.map(e=>(0,s.jsxs)("li",{className:"p-4",children:[(0,s.jsxs)("div",{className:"font-semibold text-gray-800",children:[e.property_no," (",e.article_type,")"]}),(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:e.maintenance_date}),(0,s.jsxs)("div",{className:"text-gray-600",children:["Task: ",e.task_performed]}),(0,s.jsxs)("div",{className:"text-gray-400 text-xs",children:["User: ",e.user_name," | Maintained By: ",e.maintained_by]})]},e.id))]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[602,347,870,358],()=>t(7642)),_N_E=e.O()}]);